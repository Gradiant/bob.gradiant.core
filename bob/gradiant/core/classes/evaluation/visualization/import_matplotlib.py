import os
from sys import platform as sys_pf


def import_matplotlib():
    """
    Hack for load matplotlib and resolve the following error on macos platform:

        2019-02-22 12:58:06.477 python[3742:61433] -[NSApplication _setup:]: unrecognized selector sent to instance 0x7f87961a9930
        2019-02-22 12:58:06.485 python[3742:61433] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSApplication _setup:]: unrecognized selector sent to instance 0x7f87961a9930'
        *** First throw call stack:
        (
                0   CoreFoundation                      0x00007fff35a992db __exceptionPreprocess + 171
                1   libobjc.A.dylib                     0x00007fff5cc4ec76 objc_exception_throw + 48
                2   CoreFoundation                      0x00007fff35b31db4 -[NSObject(NSObject) doesNotRecognizeSelector:] + 132
                3   CoreFoundation                      0x00007fff35a0f820 ___forwarding___ + 1456
                4   CoreFoundation                      0x00007fff35a0f1e8 _CF_forwarding_prep_0 + 120
                5   libtk8.6.dylib                      0x0000001a2954131d TkpInit + 413
                6   libtk8.6.dylib                      0x0000001a2949917e Initialize + 2622
                7   _tkinter.cpython-36m-darwin.so      0x0000001a292c1a16 _tkinter_create + 1174
                8   python                              0x0000000108239068 _PyCFunction_FastCallDict + 200
                9   python                              0x000000010830e61f call_function + 143
                10  python                              0x000000010830c175 _PyEval_EvalFrameDefault + 46837
                11  python                              0x00000001082ff8c9 _PyEval_EvalCodeWithName + 425
                12  python                              0x000000010830f2cc _PyFunction_FastCallDict + 364
                13  python                              0x00000001081b7f80 _PyObject_FastCallDict + 320
                14  python                              0x00000001081df5f8 method_call + 136
                15  python                              0x00000001081bf5ce PyObject_Call + 62
                16  python                              0x00000001082605b5 slot_tp_init + 117
                17  python                              0x0000000108264af1 type_call + 241
                18  python                              0x00000001081b7ef1 _PyObject_FastCallDict + 177
                19  python                              0x00000001081c0137 _PyObject_FastCallKeywords + 327
                20  python                              0x000000010830e718 call_function + 392
                21  python                              0x000000010830c225 _PyEval_EvalFrameDefault + 47013
                22  python                              0x000000010830e9dc fast_function + 188
                23  python                              0x000000010830e67c call_function + 236
                24  python                              0x000000010830c175 _PyEval_EvalFrameDefault + 46837
                25  python                              0x00000001082ff8c9 _PyEval_EvalCodeWithName + 425
                26  python                              0x000000010830f2cc _PyFunction_FastCallDict + 364
                27  python                              0x00000001081b7f80 _PyObject_FastCallDict + 320
                28  python                              0x00000001081df5f8 method_call + 136
                29  python                              0x00000001081bf5ce PyObject_Call + 62
                30  python                              0x000000010830c376 _PyEval_EvalFrameDefault + 47350
                31  python                              0x00000001082ff8c9 _PyEval_EvalCodeWithName + 425
                32  python                              0x000000010830ea8a fast_function + 362
                33  python                              0x000000010830e67c call_function + 236
                34  python                              0x000000010830c175 _PyEval_EvalFrameDefault + 46837
                35  python                              0x00000001082ff8c9 _PyEval_EvalCodeWithName + 425
                36  python                              0x000000010830ea8a fast_function + 362
                37  python                              0x000000010830e67c call_function + 236
                38  python                              0x000000010830c175 _PyEval_EvalFrameDefault + 46837
                39  python                              0x00000001082ff8c9 _PyEval_EvalCodeWithName + 425
                40  python                              0x000000010830ea8a fast_function + 362
                41  python                              0x000000010830e67c call_function + 236
                42  python                              0x000000010830c225 _PyEval_EvalFrameDefault + 47013
                43  python                              0x000000010830e9dc fast_function + 188
                44  python                              0x000000010830e67c call_function + 236
                45  python                              0x000000010830c175 _PyEval_EvalFrameDefault + 46837
                46  python                              0x00000001082ff8c9 _PyEval_EvalCodeWithName + 425
                47  python                              0x000000010830f2cc _PyFunction_FastCallDict + 364
                48  python                              0x00000001081b7f80 _PyObject_FastCallDict + 320
                49  python                              0x00000001081df5f8 method_call + 136
                50  python                              0x00000001081bf5ce PyObject_Call + 62
                51  python                              0x000000010830c376 _PyEval_EvalFrameDefault + 47350
                52  python                              0x00000001082ff8c9 _PyEval_EvalCodeWithName + 425
                53  python                              0x000000010830f2cc _PyFunction_FastCallDict + 364
                54  python                              0x00000001081b7f80 _PyObject_FastCallDict + 320
                55  python                              0x00000001081df5f8 method_call + 136
                56  python                              0x00000001081bf5ce PyObject_Call + 62
                57  python                              0x000000010825efd1 slot_tp_call + 113
                58  python                              0x00000001081b7ef1 _PyObject_FastCallDict + 177
                59  python                              0x000000010830e718 call_function + 392
                60  python                              0x000000010830c175 _PyEval_EvalFrameDefault + 46837
                61  python                              0x000000010830e9dc fast_function + 188
                62  python                              0x000000010830e67c call_function + 236
                63  python                              0x000000010830c175 _PyEval_EvalFrameDefault + 46837
                64  python                              0x000000010830f212 _PyFunction_FastCallDict + 178
                65  python                              0x00000001081b7f80 _PyObject_FastCallDict + 320
                66  python                              0x00000001081df5f8 method_call + 136
                67  python                              0x00000001081bf5ce PyObject_Call + 62
                68  python                              0x000000010830c376 _PyEval_EvalFrameDefault + 47350
                69  python                              0x00000001082ff8c9 _PyEval_EvalCodeWithName + 425
                70  python                              0x000000010830f2cc _PyFunction_FastCallDict + 364
                71  python                              0x00000001081b7f80 _PyObject_FastCallDict + 320
                72  python                              0x00000001081df5f8 method_call + 136
                73  python                              0x00000001081bf5ce PyObject_Call + 62
                74  python                              0x000000010825efd1 slot_tp_call + 113
                75  python                              0x00000001081b7ef1 _PyObject_FastCallDict + 177
                76  python                              0x000000010830e718 call_function + 392
                77  python                              0x000000010830c175 _PyEval_EvalFrameDefault + 46837
                78  python                              0x000000010830f212 _PyFunction_FastCallDict + 178
                79  python                              0x00000001081b7f80 _PyObject_FastCallDict + 320
                80  python                              0x00000001081df5f8 method_call + 136
                81  python                              0x00000001081bf5ce PyObject_Call + 62
                82  python                              0x000000010830c376 _PyEval_EvalFrameDefault + 47350
                83  python                              0x00000001082ff8c9 _PyEval_EvalCodeWithName + 425
                84  python                              0x000000010830f2cc _PyFunction_FastCallDict + 364
                85  python                              0x00000001081b7f80 _PyObject_FastCallDict + 320
                86  python                              0x00000001081df5f8 method_call + 136
                87  python                              0x00000001081bf5ce PyObject_Call + 62
                88  python                              0x000000010825efd1 slot_tp_call + 113
                89  python                              0x00000001081b7ef1 _PyObject_FastCallDict + 177
                90  python                              0x000000010830e718 call_function + 392
                91  python                              0x000000010830c175 _PyEval_EvalFrameDefault + 46837
                92  python                              0x000000010830f212 _PyFunction_FastCallDict + 178
                93  python                              0x00000001081b7f80 _PyObject_FastCallDict + 320
                94  python                              0x00000001081df5f8 method_call + 136
                95  python                              0x00000001081bf5ce PyObject_Call + 62
                96  python                              0x000000010830c376 _PyEval_EvalFrameDefault + 47350
                97  python                              0x00000001082ff8c9 _PyEval_EvalCodeWithName + 425
                98  python                              0x000000010830f2cc _PyFunction_FastCallDict + 364
                99  python                              0x00000001081b7f80 _PyObject_FastCallDict + 320
                100 python                              0x00000001081df5f8 method_call + 136
                101 python                              0x00000001081bf5ce PyObject_Call + 62
                102 python                              0x000000010825efd1 slot_tp_call + 113
                103 python                              0x00000001081b7ef1 _PyObject_FastCallDict + 177
                104 python                              0x000000010830e718 call_function + 392
                105 python                              0x000000010830c175 _PyEval_EvalFrameDefault + 46837
                106 python                              0x000000010830f212 _PyFunction_FastCallDict + 178
                107 python                              0x00000001081b7f80 _PyObject_FastCallDict + 320
                108 python                              0x00000001081df5f8 method_call + 136
                109 python                              0x00000001081bf5ce PyObject_Call + 62
                110 python                              0x000000010830c376 _PyEval_EvalFrameDefault + 47350
                111 python                              0x00000001082ff8c9 _PyEval_EvalCodeWithName + 425
                112 python                              0x000000010830f2cc _PyFunction_FastCallDict + 364
                113 python                              0x00000001081b7f80 _PyObject_FastCallDict + 320
                114 python                              0x00000001081df5f8 method_call + 136
                115 python                              0x00000001081bf5ce PyObject_Call + 62
                116 python                              0x000000010825efd1 slot_tp_call + 113
                117 python                              0x00000001081b7ef1 _PyObject_FastCallDict + 177
                118 python                              0x000000010830e718 call_function + 392
                119 python                              0x000000010830c175 _PyEval_EvalFrameDefault + 46837
                120 python                              0x000000010830f212 _PyFunction_FastCallDict + 178
                121 python                              0x00000001081b7f80 _PyObject_FastCallDict + 320
                122 python                              0x00000001081df5f8 method_call + 136
                123 python                              0x00000001081bf5ce PyObject_Call + 62
                124 python                              0x000000010830c376 _PyEval_EvalFrameDefault + 47350
                125 python                              0x00000001082ff8c9 _PyEval_EvalCodeWithName + 425
                126 python                              0x000000010830f2cc _PyFunction_FastCallDict + 364
                127 python                              0x00000001081b7f80 _PyObject_FastCallDict + 320
                128 python                              0x00000001081df5f8 method_call + 136
                129 python                              0x00000001081bf5ce PyObject_Call + 62
                130 python                              0x000000010825efd1 slot_tp_call + 113
                131 python                              0x00000001081b7ef1 _PyObject_FastCallDict + 177
                132 python                              0x000000010830e718 call_function + 392
                133 python                              0x000000010830c175 _PyEval_EvalFrameDefault + 46837
                134 python                              0x000000010830f212 _PyFunction_FastCallDict + 178
                135 python                              0x00000001081b7f80 _PyObject_FastCallDict + 320
                136 python                              0x00000001081df5f8 method_call + 136
                137 python                              0x00000001081bf5ce PyObject_Call + 62
                138 python                              0x000000010830c376 _PyEval_EvalFrameDefault + 47350
                139 python                              0x00000001082ff8c9 _PyEval_EvalCodeWithName + 425
                140 python                              0x000000010830f2cc _PyFunction_FastCallDict + 364
                141 python                              0x00000001081b7f80 _PyObject_FastCallDict + 320
                142 python                              0x00000001081df5f8 method_call + 136
                143 python                              0x00000001081bf5ce PyObject_Call + 62
                144 python                              0x000000010825efd1 slot_tp_call + 113
                145 python                              0x00000001081b7ef1 _PyObject_FastCallDict + 177
                146 python                              0x000000010830e718 call_function + 392
                147 python                              0x000000010830c175 _PyEval_EvalFrameDefault + 46837
                148 python                              0x000000010830f212 _PyFunction_FastCallDict + 178
                149 python                              0x00000001081b7f80 _PyObject_FastCallDict + 320
                150 python                              0x00000001081df5f8 method_call + 136
                151 python                              0x00000001081bf5ce PyObject_Call + 62
                152 python                              0x000000010830c376 _PyEval_EvalFrameDefault + 47350
                153 python                              0x00000001082ff8c9 _PyEval_EvalCodeWithName + 425
                154 python                              0x000000010830f2cc _PyFunction_FastCallDict + 364
                155 python                              0x00000001081b7f80 _PyObject_FastCallDict + 320
                156 python                              0x00000001081df5f8 method_call + 136
                157 python                              0x00000001081bf5ce PyObject_Call + 62
                158 python                              0x000000010825efd1 slot_tp_call + 113
                159 python                              0x00000001081b7ef1 _PyObject_FastCallDict + 177
                160 python                              0x000000010830e718 call_function + 392
                161 python                              0x000000010830c175 _PyEval_EvalFrameDefault + 46837
                162 python                              0x000000010830f212 _PyFunction_FastCallDict + 178
                163 python                              0x00000001081b7f80 _PyObject_FastCallDict + 320
                164 python                              0x00000001081df5f8 method_call + 136
                165 python                              0x00000001081bf5ce PyObject_Call + 62
                166 python                              0x000000010830c376 _PyEval_EvalFrameDefault + 47350
                167 python                              0x00000001082ff8c9 _PyEval_EvalCodeWithName + 425
                168 python                              0x000000010830f2cc _PyFunction_FastCallDict + 364
                169 python                              0x00000001081b7f80 _PyObject_FastCallDict + 320
                170 python                              0x00000001081df5f8 method_call + 136
                171 python                              0x00000001081bf5ce PyObject_Call + 62
                172 python                              0x000000010825efd1 slot_tp_call + 113
                173 python                              0x00000001081b7ef1 _PyObject_FastCallDict + 177
                174 python                              0x000000010830e718 call_function + 392
                175 python                              0x000000010830c175 _PyEval_EvalFrameDefault + 46837
                176 python                              0x000000010830f212 _PyFunction_FastCallDict + 178
                177 python                              0x00000001081b7f80 _PyObject_FastCallDict + 320
                178 python                              0x00000001081df5f8 method_call + 136
                179 python                              0x00000001081bf5ce PyObject_Call + 62
                180 python                              0x000000010830c376 _PyEval_EvalFrameDefault + 47350
                181 python                              0x00000001082ff8c9 _PyEval_EvalCodeWithName + 425
                182 python                              0x000000010830f2cc _PyFunction_FastCallDict + 364
                183 python                              0x00000001081b7f80 _PyObject_FastCallDict + 320
                184 python                              0x00000001081df5f8 method_call + 136
                185 python                              0x00000001081bf5ce PyObject_Call + 62
                186 python                              0x000000010825efd1 slot_tp_call + 113
                187 python                              0x00000001081b7ef1 _PyObject_FastCallDict + 177
                188 python                              0x000000010830e718 call_function + 392
                189 python                              0x000000010830c175 _PyEval_EvalFrameDefault + 46837
                190 python                              0x000000010830f212 _PyFunction_FastCallDict + 178
                191 python                              0x00000001081b7f80 _PyObject_FastCallDict + 320
                192 python                              0x00000001081df5f8 method_call + 136
                193 python                              0x00000001081bf5ce PyObject_Call + 62
                194 python                              0x000000010830c376 _PyEval_EvalFrameDefault + 47350
                195 python                              0x00000001082ff8c9 _PyEval_EvalCodeWithName + 425
                196 python                              0x000000010830f2cc _PyFunction_FastCallDict + 364
                197 python                              0x00000001081b7f80 _PyObject_FastCallDict + 320
                198 python                              0x00000001081df5f8 method_call + 136
                199 python                              0x00000001081bf5ce PyObject_Call + 62
                200 python                              0x000000010825efd1 slot_tp_call + 113
                201 python                              0x00000001081b7ef1 _PyObject_FastCallDict + 177
                202 python                              0x000000010830e718 call_function + 392
                203 python                              0x000000010830c175 _PyEval_EvalFrameDefault + 46837
                204 python                              0x000000010830f212 _PyFunction_FastCallDict + 178
                205 python                              0x00000001081b7f80 _PyObject_FastCallDict + 320
                206 python                              0x00000001081df5f8 method_call + 136
                207 python                              0x00000001081bf5ce PyObject_Call + 62
                208 python                              0x000000010830c376 _PyEval_EvalFrameDefault + 47350
                209 python                              0x00000001082ff8c9 _PyEval_EvalCodeWithName + 425
                210 python                              0x000000010830f2cc _PyFunction_FastCallDict + 364
                211 python                              0x00000001081b7f80 _PyObject_FastCallDict + 320
                212 python                              0x00000001081df5f8 method_call + 136
                213 python                              0x00000001081bf5ce PyObject_Call + 62
                214 python                              0x000000010825efd1 slot_tp_call + 113
                215 python                              0x00000001081b7ef1 _PyObject_FastCallDict + 177
                216 python                              0x000000010830e718 call_function + 392
                217 python                              0x000000010830c175 _PyEval_EvalFrameDefault + 46837
                218 python                              0x000000010830e9dc fast_function + 188
                219 python                              0x000000010830e67c call_function + 236
                220 python                              0x000000010830c175 _PyEval_EvalFrameDefault + 46837
                221 python                              0x000000010830e9dc fast_function + 188
                222 python                              0x000000010830e67c call_function + 236
                223 python                              0x000000010830c175 _PyEval_EvalFrameDefault + 46837
                224 python                              0x00000001082ff8c9 _PyEval_EvalCodeWithName + 425
                225 python                              0x000000010820292d function_call + 125
                226 python                              0x00000001081bf5ce PyObject_Call + 62
                227 python                              0x000000010830c376 _PyEval_EvalFrameDefault + 47350
                228 python                              0x00000001082ff8c9 _PyEval_EvalCodeWithName + 425
                229 python                              0x000000010830f2cc _PyFunction_FastCallDict + 364
                230 python                              0x00000001081b7f80 _PyObject_FastCallDict + 320
                231 python                              0x00000001081df5f8 method_call + 136
                232 python                              0x00000001081bf5ce PyObject_Call + 62
                233 python                              0x00000001082605b5 slot_tp_init + 117
                234 python                              0x0000000108264af1 type_call + 241
                235 python                              0x00000001081b7ef1 _PyObject_FastCallDict + 177
                236 python                              0x000000010830e718 call_function + 392
                237 python                              0x000000010830c175 _PyEval_EvalFrameDefault + 46837
                238 python                              0x00000001082ff8c9 _PyEval_EvalCodeWithName + 425
                239 python                              0x000000010835855c PyRun_FileExFlags + 252
                240 python                              0x0000000108357a34 PyRun_SimpleFileExFlags + 372
                241 python                              0x000000010837e7c6 Py_Main + 3734
                242 python                              0x00000001081aff59 main + 313
                243 libdyld.dylib                       0x00007fff5d868015 start + 1
        )
        libc++abi.dylib: terminating with uncaught exception of type NSException
        Abort trap: 6

    """
    import matplotlib
    if sys_pf == 'darwin':
        matplotlib.use("TkAgg")
    if "BUILD_NUMBER" in os.environ:
        matplotlib.use('agg')
